# SMS Checker / Frontend

The frontend allows users to interact with the model in the backend through a web-based UI.

The frontend is implemented with Spring Boot and only consists of a website and one REST endpoint.
It **requires Java 25+** to run (tested with 25.0.1).
Any classification requests will be delegated to the `backend` service that serves the model.
You must specify the environment variable `MODEL_HOST` to define where the backend is running.

The frontend service can be started through running the `Main` class (e.g., in your IDE) or through Maven (recommended):

    MODEL_HOST="http://localhost:8081" mvn spring-boot:run

The server runs on port 8080 as default. Once its startup has finished, you can access [localhost:8080/sms](http://localhost:8080/sms) in your browser to interact with the application. 

It is possible to change the port through either the docker-compose file, or through the dockerfile within this repository as it is an ENV variable. The reason we wanted to keep the ENV variable also declared in dockerfile was to make sure that the defaults worked properly if the container was run seperately without the docker-compose. The docker-compose overrides the ones declared in the dockerfile.

## `lib-version` Integration

To run the app, run:

```bash
docker run --rm -it --add-host=host.docker.internal:host-gateway -p 8080:8080 -v ./:/usr/src/app:Z -w /usr/src/app maven:3.9.11-eclipse-temurin-25-noble /bin/bash -c 'MODEL_HOST="http://host.docker.internal:8081" mvn spring-boot:run --settings .github/workspace/settings.xml -Dgithub.pat=ghp_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx' 
```

To use the image of the Dockerfile, create a file named `.pat` and put your GitHub PAT in there. Then, run:

```bash
docker build --secret id=pat,src=.pat -t app .
```

To run this image, run:

```bash
docker run --rm -p 8080:8080 app
```

If you want to use the spam detection functionality, make sure to have the backend (spam detection model) serving on `localhost:8081`.

To show off the the functionality of the `lib-version` library, there is a button called "Good Sentence". When this button is pressed, a sentence is generated by the `lib-version` library and placed in the text area. Additionally, a message is shown that displays the library name and version.


## Observability & Metrics [A3]

This service exposes custom Prometheus metrics at `/metrics`.

| Metric Name | Type | Description | Labels |
| :--- | :--- | :--- | :--- |
| `sms_active_requests` | **Gauge** | Tracks the number of requests currently being processed by the frontend. | `area="sms_check"` |
| `sms_predictions_total` | **Counter** | Total number of prediction requests sent to the backend. | `component="frontend_controller"`<br>`outcome="success"` (or `"error"`) |
| `sms_prediction_latency` | **Histogram** | Distribution of time taken to receive a response from the model service. | `quantile="0.5"`, `quantile="0.95"` |
